<!DOCTYPE html>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
   </head>
   <body style="height: 100%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
       <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=xfhhaTThl11qYVrqLZii6w8qE5ggnhrY&__ec_v__=20190126"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
       <script type="text/javascript">
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};
option = null;
var cities = [
	//city, lng, lat, value
    ['大庆', 125.03, 46.58, 3],
    ['武汉', 114.31, 30.52, 3],
    ['合肥', 117.27, 31.86, 1],
    ['菏泽', 115.480656, 35.23375, 2],
    ['廊坊', 116.7, 39.53, 4],
    ['衢州', 118.88, 28.97, 5],
    ['长沙', 113, 28.21, 5],
    ['岳阳', 113.09, 29.37, 3],
    ['金华', 119.64, 29.12, 1],
    ['湘潭', 112.91, 27.87, 1],
    ['保定', 115.48, 38.85, 5],
    ['常德', 111.69, 29.05, 1],
    ['莱芜', 117.67, 36.19, 1],
    ['石家庄', 114.48, 38.03, 1],
    ['株洲', 113.16, 27.83, 1],
    ['秦皇岛', 119.57, 39.95, 4],
    ['洛阳', 112.44, 34.7, 1],
    ['丽水', 119.92, 28.45, 3],
    ['义乌', 120.06, 29.32, 4],
    ['宜昌', 111.3, 30.7, 2],
    ['荆州', 112.239741, 30.335165, 1],
    ['德州', 116.29, 37.45, 2],
    ['济宁', 116.59, 35.38, 3],
    ['唐山', 118.02, 39.63, 1],
    ['平顶山', 113.29, 33.75, 2],
    ['邢台', 114.48, 37.05, 5],
    ['芜湖', 118.38, 31.33, 2],
    ['聊城', 115.97, 36.45, 2],
    ['哈尔滨', 126.63, 45.75, 2],
    ['郑州', 113.65, 34.76, 5],
    ['泰安', 117.13, 36.18, 4],
    ['诸暨', 120.23, 29.71, 4],
    ['富阳', 119.95, 30.07, 3],
    ['天津', 117.2, 39.13, 3],
    ['南充', 106.110698, 30.837793, 1],
    ['临沂', 118.35, 35.05, 3],
    ['沧州', 116.83, 38.33, 3],
    ['临安', 119.72, 30.23, 4],
    ['兰州', 103.73, 36.03, 3],
    ['邯郸', 114.47, 36.6, 4],
    ['九江', 115.97, 29.71, 3],
    ['温州', 120.65, 28.01, 4],
    ['德阳', 104.37, 31.13, 3],
    ['济南', 117, 36.65, 1],
    ['安阳', 114.35, 36.1, 2],
    ['开封', 114.35, 34.79, 4],
    ['鞍山', 122.85, 41.12, 3],
    ['溧阳', 119.48, 31.43, 1],
    ['库尔勒', 86.06, 41.68, 4],
    ['淄博', 118.05, 36.78, 2],
    ['乌鲁木齐', 87.68, 43.77, 4],
    ['枣庄', 117.57, 34.86, 5],
    ['杭州', 120.19, 30.26, 4],
    ['衡水', 115.72, 37.72, 1],
    ['包头', 110, 40.58, 4],
    ['绵阳', 104.73, 31.48, 3],
    ['北京', 116.46, 39.92, 4],
    ['徐州', 117.2, 34.26, 3],
    ['焦作', 113.21, 35.24, 3],
    ['句容', 119.16, 31.95, 1],
    ['克拉玛依', 84.77, 45.59, 3],
    ['渭南', 109.5, 34.52, 2],
    ['马鞍山', 118.48, 31.56, 2],
    ['宝鸡', 107.15, 34.38, 3],
    ['贵阳', 106.71, 26.57, 1],
    ['无锡', 120.29, 31.59, 4],
    ['本溪', 123.73, 41.3, 1],
    ['滨州', 118.03, 37.36, 5],
    ['台州', 121.420757, 28.656386, 4],
    ['南京', 118.78, 32.04, 2],
    ['重庆', 106.54, 29.59, 2],
    ['潍坊', 119.1, 36.62, 1],
    ['扬州', 119.42, 32.39, 5],
    ['常州', 119.95, 31.79, 3],
    ['牡丹江', 129.58, 44.6, 3],
    ['遵义', 106.9, 27.7, 3],
    ['绍兴', 120.58, 30.01, 1],
    ['金坛', 119.56, 31.74, 1],
    ['东营', 118.49, 37.46, 3],
    ['西安', 108.95, 34.27, 2],
    ['北海', 109.12, 21.49, 3],
    ['镇江', 119.44, 32.2, 5],
    ['桂林', 110.28, 25.29, 1],
    ['张家界', 110.479191, 29.117096, 3],
    ['宜兴', 119.82, 31.36, 5],
    ['宜宾', 104.56, 29.77, 4],
    ['呼和浩特', 111.65, 40.82, 4],
    ['成都', 104.06, 30.67, 3],
    ['大同', 113.3, 40.12, 3],
    ['阳江', 111.95, 21.85, 4],
    ['泸州', 105.39, 28.91, 3],
    ['西宁', 101.74, 36.56, 3],
    ['自贡', 104.778442, 29.33903, 2],
    ['吉林', 126.57, 43.87, 1],
    ['锦州', 121.15, 41.13, 5],
    ['南昌', 115.89, 28.68, 1],
    ['柳州', 109.4, 24.33, 2],
    ['三亚', 109.511909, 18.252847, 2],
    ['三门峡', 111.19, 34.76, 4],
    ['胶州', 120.03336, 36.264622, 2],
    ['银川', 106.27, 38.47, 2],
    ['张家港', 120.555821, 31.875428, 5],
    ['嘉兴', 120.76, 30.77, 3],
    ['长春', 125.35, 43.88, 3],
    ['沈阳', 123.38, 41.8, 5],
    ['苏州', 120.62, 31.32, 4],
    ['茂名', 110.88, 21.68, 3],
    ['石嘴山', 106.39, 39.04, 3],
    ['大连', 121.62, 38.92, 5],
    ['临汾', 111.5, 36.08, 5],
    ['吴江', 120.63, 31.16, 2],
    ['肇庆', 112.44, 23.05, 5],
    ['江门', 113.06, 22.61, 3],
    ['章丘', 117.53, 36.72, 4],
    ['铜川', 109.11, 35.09, 4],
    ['平度', 119.97, 36.77, 4],
    ['佛山', 113.11, 23.05, 1],
    ['海口', 110.35, 20.02, 4],
    ['宿迁', 118.3, 33.96, 1],
    ['咸阳', 108.72, 34.36, 3],
    ['珠海', 113.52, 22.3, 1],
    ['长治', 113.08, 36.18, 4],
    ['深圳', 114.07, 22.62, 3],
    ['寿光', 118.73, 36.86, 3],
    ['盘锦', 122.070714, 41.119997, 1],
    ['太原', 112.53, 37.87, 3],
    ['清远', 113.01, 23.7, 3],
    ['中山', 113.38, 22.52, 4],
    ['昆明', 102.73, 25.04, 1],
    ['韶关', 113.62, 24.84, 2],
    ['嘉峪关', 98.289152, 39.77313, 5],
    ['广州', 113.23, 23.16, 2],
    ['延安', 109.47, 36.6, 4],
    ['南宁', 108.33, 22.84, 2],
    ['营口', 122.18, 40.65, 2],
    ['惠州', 114.4, 23.09, 1],
    ['江阴', 120.26, 31.91, 1],
    ['蓬莱', 120.75, 37.8, 1],
    ['常熟', 120.74, 31.64, 4],
    ['东莞', 113.75, 23.04, 1],
    ['河源', 114.68, 23.73, 1],
    ['淮安', 119.15, 33.5, 4],
    ['泰州', 119.9, 32.49, 3],
    ['连云港', 119.16, 34.59, 3],
    ['葫芦岛', 120.836932, 40.711052, 2],
    ['揭阳', 116.35, 23.55, 3],
    ['荣成', 122.41, 37.16, 2],
    ['昆山', 120.95, 31.39, 4],
    ['宁波', 121.56, 29.86, 4],
    ['湛江', 110.359377, 21.270708, 5],
    ['莱州', 119.942327, 37.177017, 1],
    ['湖州', 120.1, 30.86, 3],
    ['汕头', 116.69, 23.39, 3],
    ['抚顺', 123.97, 41.97, 4],
    ['玉溪', 102.52, 24.35, 3],
    ['张家口', 114.87, 40.82, 5],
    ['阳泉', 113.57, 37.85, 4],
    ['瓦房店', 121.979603, 39.627114, 1],
    ['即墨', 120.45, 36.38, 4],
    ['福州', 119.3, 26.08, 4],
    ['烟台', 121.39, 37.52, 2],
    ['丹东', 124.37, 40.13, 2],
    ['太仓', 121.1, 31.45, 3],
    ['曲靖', 103.79, 25.51, 2],
    ['厦门', 118.1, 24.46, 3],
    ['汕尾', 115.375279, 22.786211, 5],
    ['潮州', 116.63, 23.68, 3],
    ['梅州', 116.1, 24.55, 4],
    ['文登', 122.05, 37.2, 3],
    ['上海', 121.48, 31.22, 4],
    ['攀枝花', 101.718637, 26.582347, 3],
    ['威海', 122.1, 37.5, 5],
    ['承德', 117.93, 40.97, 5],
    ['拉萨', 91.11, 29.97, 4],
    ['云浮', 112.02, 22.93, 3],
    ['南通', 121.05, 32.08, 3],
    ['胶南', 119.97, 35.88, 4],
    ['泉州', 118.58, 24.93, 3],
    ['莱西', 120.53, 36.86, 4],
    ['日照', 119.46, 35.42, 4],
    ['金昌', 102.188043, 38.520089, 1],
    ['青岛', 120.33, 36.07, 3],
    ['乳山', 121.52, 36.89, 1],
    ['赤峰', 118.87, 42.28, 1],
    ['盐城', 120.13, 33.38, 3],
    ['齐齐哈尔', 123.97, 47.33, 4],
    ['鄂尔多斯', 109.781327, 39.608266, 2],
    ['招远', 120.38, 37.35, 5],
    ['舟山', 122.207216, 29.985295, 3],
    ['海门', 121.15, 31.89, 2]
];
var movelines = [
	//start, lng-s, lat-s, end, lng-e, lat-e
    ['大庆', 125.03, 46.58, '锦州', 121.15, 41.13],
    ['武汉', 114.31, 30.52, '南昌', 115.89, 28.68],
    ['合肥', 117.27, 31.86, '柳州', 109.4, 24.33],
    ['菏泽', 115.480656, 35.23375, '三亚', 109.511909, 18.252847],
    ['廊坊', 116.7, 39.53, '三门峡', 111.19, 34.76],
    ['衢州', 118.88, 28.97, '胶州', 120.03336, 36.264622],
    ['长沙', 113, 28.21, '银川', 106.27, 38.47],
    ['岳阳', 113.09, 29.37, '张家港', 120.555821, 31.875428],
    ['金华', 119.64, 29.12, '嘉兴', 120.76, 30.77],
    ['湘潭', 112.91, 27.87, '长春', 125.35, 43.88],
    ['保定', 115.48, 38.85, '沈阳', 123.38, 41.8],
    ['常德', 111.69, 29.05, '苏州', 120.62, 31.32],
    ['莱芜', 117.67, 36.19, '茂名', 110.88, 21.68],
    ['石家庄', 114.48, 38.03, '石嘴山', 106.39, 39.04],
    ['株洲', 113.16, 27.83, '大连', 121.62, 38.92],
    ['秦皇岛', 119.57, 39.95, '临汾', 111.5, 36.08],
    ['洛阳', 112.44, 34.7, '吴江', 120.63, 31.16],
    ['丽水', 119.92, 28.45, '肇庆', 112.44, 23.05],
    ['义乌', 120.06, 29.32, '江门', 113.06, 22.61],
    ['宜昌', 111.3, 30.7, '章丘', 117.53, 36.72],
    ['荆州', 112.239741, 30.335165, '铜川', 109.11, 35.09],
    ['德州', 116.29, 37.45, '平度', 119.97, 36.77],
    ['济宁', 116.59, 35.38, '佛山', 113.11, 23.05],
    ['唐山', 118.02, 39.63, '海口', 110.35, 20.02],
    ['平顶山', 113.29, 33.75, '宿迁', 118.3, 33.96],
    ['邢台', 114.48, 37.05, '咸阳', 108.72, 34.36],
    ['芜湖', 118.38, 31.33, '珠海', 113.52, 22.3],
    ['聊城', 115.97, 36.45, '长治', 113.08, 36.18],
    ['哈尔滨', 126.63, 45.75, '深圳', 114.07, 22.62],
    ['郑州', 113.65, 34.76, '寿光', 118.73, 36.86],
    ['泰安', 117.13, 36.18, '盘锦', 122.070714, 41.119997],
    ['诸暨', 120.23, 29.71, '太原', 112.53, 37.87],
    ['富阳', 119.95, 30.07, '清远', 113.01, 23.7],
    ['天津', 117.2, 39.13, '中山', 113.38, 22.52],
    ['南充', 106.110698, 30.837793, '昆明', 102.73, 25.04],
    ['临沂', 118.35, 35.05, '韶关', 113.62, 24.84],
    ['沧州', 116.83, 38.33, '嘉峪关', 98.289152, 39.77313],
    ['临安', 119.72, 30.23, '广州', 113.23, 23.16],
    ['兰州', 103.73, 36.03, '延安', 109.47, 36.6],
    ['邯郸', 114.47, 36.6, '南宁', 108.33, 22.84],
    ['九江', 115.97, 29.71, '营口', 122.18, 40.65],
    ['温州', 120.65, 28.01, '惠州', 114.4, 23.09],
    ['德阳', 104.37, 31.13, '江阴', 120.26, 31.91],
    ['济南', 117, 36.65, '蓬莱', 120.75, 37.8],
    ['安阳', 114.35, 36.1, '常熟', 120.74, 31.64],
    ['开封', 114.35, 34.79, '东莞', 113.75, 23.04],
    ['鞍山', 122.85, 41.12, '河源', 114.68, 23.73],
    ['溧阳', 119.48, 31.43, '淮安', 119.15, 33.5],
    ['库尔勒', 86.06, 41.68, '泰州', 119.9, 32.49],
    ['淄博', 118.05, 36.78, '连云港', 119.16, 34.59],
    ['乌鲁木齐', 87.68, 43.77, '葫芦岛', 120.836932, 40.711052],
    ['枣庄', 117.57, 34.86, '揭阳', 116.35, 23.55],
    ['杭州', 120.19, 30.26, '荣成', 122.41, 37.16],
    ['衡水', 115.72, 37.72, '昆山', 120.95, 31.39],
    ['包头', 110, 40.58, '宁波', 121.56, 29.86],
    ['绵阳', 104.73, 31.48, '湛江', 110.359377, 21.270708],
    ['北京', 116.46, 39.92, '莱州', 119.942327, 37.177017],
    ['徐州', 117.2, 34.26, '湖州', 120.1, 30.86],
    ['焦作', 113.21, 35.24, '汕头', 116.69, 23.39],
    ['句容', 119.16, 31.95, '抚顺', 123.97, 41.97],
    ['克拉玛依', 84.77, 45.59, '玉溪', 102.52, 24.35],
    ['渭南', 109.5, 34.52, '张家口', 114.87, 40.82],
    ['马鞍山', 118.48, 31.56, '阳泉', 113.57, 37.85],
    ['宝鸡', 107.15, 34.38, '瓦房店', 121.979603, 39.627114],
    ['贵阳', 106.71, 26.57, '即墨', 120.45, 36.38],
    ['无锡', 120.29, 31.59, '福州', 119.3, 26.08],
    ['本溪', 123.73, 41.3, '烟台', 121.39, 37.52],
    ['滨州', 118.03, 37.36, '丹东', 124.37, 40.13],
    ['台州', 121.420757, 28.656386, '太仓', 121.1, 31.45],
    ['南京', 118.78, 32.04, '曲靖', 103.79, 25.51],
    ['重庆', 106.54, 29.59, '厦门', 118.1, 24.46],
    ['潍坊', 119.1, 36.62, '汕尾', 115.375279, 22.786211],
    ['扬州', 119.42, 32.39, '潮州', 116.63, 23.68],
    ['常州', 119.95, 31.79, '梅州', 116.1, 24.55],
    ['牡丹江', 129.58, 44.6, '文登', 122.05, 37.2],
    ['遵义', 106.9, 27.7, '上海', 121.48, 31.22],
    ['绍兴', 120.58, 30.01, '攀枝花', 101.718637, 26.582347],
    ['金坛', 119.56, 31.74, '威海', 122.1, 37.5],
    ['东营', 118.49, 37.46, '承德', 117.93, 40.97],
    ['西安', 108.95, 34.27, '拉萨', 91.11, 29.97],
    ['北海', 109.12, 21.49, '云浮', 112.02, 22.93],
    ['镇江', 119.44, 32.2, '南通', 121.05, 32.08],
    ['桂林', 110.28, 25.29, '胶南', 119.97, 35.88],
    ['张家界', 110.479191, 29.117096, '泉州', 118.58, 24.93],
    ['宜兴', 119.82, 31.36, '莱西', 120.53, 36.86],
    ['宜宾', 104.56, 29.77, '日照', 119.46, 35.42],
    ['呼和浩特', 111.65, 40.82, '金昌', 102.188043, 38.520089],
    ['成都', 104.06, 30.67, '青岛', 120.33, 36.07],
    ['大同', 113.3, 40.12, '乳山', 121.52, 36.89],
    ['阳江', 111.95, 21.85, '赤峰', 118.87, 42.28],
    ['泸州', 105.39, 28.91, '盐城', 120.13, 33.38],
    ['西宁', 101.74, 36.56, '齐齐哈尔', 123.97, 47.33],
    ['自贡', 104.778442, 29.33903, '鄂尔多斯', 109.781327, 39.608266],
    ['吉林', 126.57, 43.87, '招远', 120.38, 37.35],
    ['舟山', 122.207216, 29.985295, '海门', 121.15, 31.89]
];
function convertdata1(d){
    var res = [];
    for (var i = 0; i < d.length; i++) {
        res.push({
            name:d[i][0],
            value:[d[i][1],d[i][2],d[i][3]]
        });
    }   
    return res;
}

function convertdata2(d){
    var res = [];
    for (var i = 0; i < d.length; i++) {
        res.push({
            fromName:d[i][0],
            toName:d[i][3],
            coords:[[d[i][1],d[i][2]],[d[i][4],d[i][5]]]
        });
    }   
    return res;
}

var c1 = convertdata1(cities);
var m1 = convertdata2(movelines);

option = {
    //标题
    title: {
        text: 'OD图实例',
        top:'2%',
        left: 'center',
        textStyle: {
            color: '#fff'
        }
    }, 
    legend: {
        show: true,
        top: '8%',
        left: 'center',
        data: ['地点', '线路'],
        textStyle: {
            color: '#fff'
        }
    },
    //底图
    bmap: {
        center: [104.114129, 37.550339],
        zoom: 5,
        roam: true,
        mapStyle: {
            styleJson:[
                      {
                                "featureType": "land",
                                "elementType": "geometry",
                                "stylers": {
                                          "color": "#212121"
                                }
                      },
                      {
                                "featureType": "building",
                                "elementType": "geometry",
                                "stylers": {
                                          "color": "#2b2b2b"
                                }
                      },
                      {
                                "featureType": "highway",
                                "elementType": "all",
                                "stylers": {
                                          "lightness": -42,
                                          "saturation": -91
                                }
                      },
                      {
                                "featureType": "arterial",
                                "elementType": "geometry",
                                "stylers": {
                                          "lightness": -77,
                                          "saturation": -94
                                }
                      },
                      {
                                "featureType": "green",
                                "elementType": "geometry",
                                "stylers": {
                                          "color": "#1b1b1b"
                                }
                      },
                      {
                                "featureType": "water",
                                "elementType": "geometry",
                                "stylers": {
                                          "color": "#181818"
                                }
                      },
                      {
                                "featureType": "subway",
                                "elementType": "geometry.stroke",
                                "stylers": {
                                          "color": "#181818"
                                }
                      },
                      {
                                "featureType": "railway",
                                "elementType": "geometry",
                                "stylers": {
                                          "lightness": -52
                                }
                      },
                      {
                                "featureType": "all",
                                "elementType": "labels.text.stroke",
                                "stylers": {
                                          "color": "#313131"
                                }
                      },
                      {
                                "featureType": "all",
                                "elementType": "labels.text.fill",
                                "stylers": {
                                          "color": "#8b8787"
                                }
                      },
                      {
                                "featureType": "manmade",
                                "elementType": "geometry",
                                "stylers": {
                                          "color": "#1b1b1b"
                                }
                      },
                      {
                                "featureType": "local",
                                "elementType": "geometry",
                                "stylers": {
                                          "lightness": -75,
                                          "saturation": -91
                                }
                      },
                      {
                                "featureType": "subway",
                                "elementType": "geometry",
                                "stylers": {
                                          "lightness": -65
                                }
                      },
                      {
                                "featureType": "railway",
                                "elementType": "all",
                                "stylers": {
                                          "lightness": -40
                                }
                      },
                      {
                                "featureType": "boundary",
                                "elementType": "geometry",
                                "stylers": {
                                          "color": "#8b8787",
                                          "weight": "1",
                                          "lightness": -29
                                }
                      }
            ]       
        }
    },
    series: [{
        name: '地点',
        type: 'effectScatter',
        coordinateSystem: 'bmap',
        zlevel: 1,
        rippleEffect: {
            brushType: 'stroke'
        },
        label: {
            emphasis: {
                show: true,
                position: 'right',
                formatter: '{b}'
            }
        },
        symbolSize: function (val) {
                return val[2];
        },
        itemStyle: {
            normal: {
                color: '#F58158'
            }
        },
        data: c1
    }, {
        name: '线路',
        type: 'lines',
        coordinateSystem: 'bmap',
        zlevel: 2,
        large: true,
        effect: {
            //动态小点运动效果
            show: true,
            constantSpeed: 30,
            //样式
            symbol: 'pin',
            symbolSize: 3,
            //轨迹长度
            trailLength: 0,
        },
        lineStyle: {
            normal: {
                //渐变色
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0, color: '#58B3CC'
                    }, {
                        offset: 1, color: '#F58158'
                    }], false),
                width: 2,
                opacity: 0.5,
                //曲线弯曲程度
                curveness: 0.1
            }
        },
        data: m1
    }]
};
;
if (option && typeof option === "object") {
    myChart.setOption(option, true);
}
       </script>
   </body>
</html>